<!DOCTYPE html><html><head><title>Manage Staff</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"><style>body{background-color:#2b2d31;color:#ddd;}.card{background-color:#313338;border:1px solid #444;}</style></head><body><nav class="navbar navbar-dark bg-dark p-3 mb-4"><div class="container-fluid"><span class="navbar-brand">ğŸ© Admin: Staff Management</span><div><a href="/dashboard" class="btn btn-outline-light me-2">Back</a><a href="/logout" class="btn btn-outline-danger">Logout</a></div></div></nav><div class="container"><% if(success_msg.length>0){ %><div class="alert alert-success"><%= success_msg %></div><% } %><% if(error_msg.length>0){ %><div class="alert alert-danger"><%= error_msg %></div><% } %><div class="row"><div class="col-md-4"><div class="card p-3"><h4>â• Create Account</h4><form action="/admin/staff/create" method="POST"><div class="mb-2"><label>Username</label><input type="text" name="username" class="form-control" required></div><div class="mb-2"><label>Initial Password</label><input type="text" name="password" class="form-control" required></div><div class="mb-3"><label>Permission Level</label><select name="role" class="form-select"><option value="Staff">Staff (Standard)</option><option value="Owner">Owner (Admin)</option></select></div><button type="submit" class="btn btn-success w-100">Create User</button></form></div></div><div class="col-md-8"><div class="card p-3"><h4>ğŸ“‹ Current Staff</h4><table class="table table-dark table-striped mt-3 align-middle"><thead><tr><th>Username</th><th>Role</th><th>Actions</th></tr></thead><tbody><% staffList.forEach(function(s){ %><tr><td><%= s.username %></td><td><span class="badge <%= s.role==='Owner'?'bg-danger':'bg-primary' %>"><%= s.role %></span></td><td><button class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#manageModal<%= s._id %>">âš™ï¸ Manage</button></td></tr><div class="modal fade" id="manageModal<%= s._id %>" tabindex="-1"><div class="modal-dialog"><div class="modal-content bg-dark text-white"><div class="modal-header"><h5 class="modal-title">Manage: <%= s.username %></h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><form action="/admin/staff/role" method="POST" class="mb-4"><label class="form-label text-warning">ğŸ·ï¸ Change Role</label><div class="input-group"><input type="hidden" name="id" value="<%= s._id %>"><select name="new_role" class="form-select"><option value="Staff" <%= s.role==='Staff'?'selected':'' %>>Staff</option><option value="Owner" <%= s.role==='Owner'?'selected':'' %>>Owner</option></select><button type="submit" class="btn btn-light">Update</button></div></form><hr class="border-secondary"><form action="/admin/staff/reset" method="POST" class="mb-4"><label class="form-label text-info">ğŸ” Reset Password</label><div class="input-group"><input type="hidden" name="id" value="<%= s._id %>"><input type="text" name="new_password" class="form-control" placeholder="New Password" required><button type="submit" class="btn btn-info">Save</button></div></form><hr class="border-secondary"><form action="/admin/staff/delete" method="POST"><label class="form-label text-danger">âš ï¸ Danger Zone</label><input type="hidden" name="id" value="<%= s._id %>"><button type="submit" class="btn btn-danger w-100" onclick="return confirm('Delete user?')">Delete Account</button></form></div></div></div></div><% }); %></tbody></table></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script></body></html>
